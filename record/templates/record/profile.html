{% extends "record/layout.html" %}
{% block body %}
<h2>{{ profile_user.username }}'s Profile</h2>



<h3>Followers:({{ followers|length }})</h3>
<ul>
    {% for follower in followers %}
        <li class="d-flex justify-content-between align-items-center">
            <a href="{% url 'profile_view' user_id=follower.id %}">
                {{ follower.username }} 
            </a>
            {% if request.user != follower %}
                <a href="{% url 'chat_view' user_id=follower.id %}" class="btn btn-outline-primary btn-sm">Message</a>
            {% endif %}
        </li>
    {% empty %}
        <li>No followers yet.</li>
    {% endfor %}
</ul>

<h3>Following:({{ following|length }})</h3>
<ul>
    {% for followed in following %}
        <li class="d-flex justify-content-between align-items-center">
            <a href="{% url 'profile_view' user_id=followed.id %}">
                {{ followed.username }} 
            </a>
            {% if request.user != followed %}
                <a href="{% url 'chat_view' user_id=followed.id %}" class="btn btn-outline-primary btn-sm">Message</a>
            {% endif %}
        </li>
    {% empty %}
        <li>Not following anyone yet.</li>
    {% endfor %}
</ul>

{% if request.user != profile_user %}
    <form action="{% url 'toggle_follow' user_id=profile_user.id %}" method="post">
        {% csrf_token %}
        {% if is_following %}
            <button type="submit" class="btn btn-danger">Unfollow</button>
        {% else %}
            <button type="submit" class="btn btn-primary">Follow</button>
        {% endif %}
    </form>
{% endif %}

<H1>Find New User</H1><a class="nav-link" href="{% url 'find_users' %}">Users</a>
{% endblock %}
